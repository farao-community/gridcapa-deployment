apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

bases:
  - ../../../bases/common
  - ../../../bases/cse-common

resources:
  - postgresql-deployment.yaml
  - postgresql-service.yaml

patches:
  - patch: |-
      apiVersion: apps/v1
      kind: StatefulSet
      metadata:
        name: gridcapa-rabbitmq
      spec:
        volumeClaimTemplates:
          - metadata:
              name: gridcapa-rabbitmq-data
            spec:
              storageClassName: csi-platinum-sc
              accessModes:
                - ReadWriteOnce
              resources:
                requests:
                  storage: "5Gi"