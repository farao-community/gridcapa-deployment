apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

bases:
  - ../common
  - ../../../cse/common
  - ../cse/export-corner/d2cc
  - ../cse/export-corner/idcc
  - ../cse/import-corner/d2cc
  - ../cse/import-corner/idcc
  - ../../../common-valid
  - ../core/valid
  - ../cse/valid/

resources:
  - apps-metadata-server-configmap.yaml
  - auth-ingress.yaml
  - gridcapa-app-env-configmap.yaml
  - gridcapa-ingress.yaml
  - filebrowser-configmap.yaml
  - filebrowser-deployment.yaml
  - filebrowser-pv-claim.yaml
  - filebrowser-service.yaml
  - ftp-pv-claim.yaml
  - ftp-server-deployment.yaml
  - ftp-server-service.yaml
  - postgresql-configmap.yaml
  - postgresql-deployment.yaml
  - gridcapa-gateway-configmap.yaml
  - gridcapa-gateway-deployment.yaml
  - gridcapa-gateway-service.yaml
  - keycloak-deployment.yaml
  - keycloak-pv-claim.yaml
  - keycloak-service.yaml

configMapGenerator:
  - name: env-configmap
    env: env.properties

images:
  - name: apps-metadata-server
    newName: docker.io/bitnami/apache
    newTag: latest
  - name: rabbitmq
    newName: docker.io/rabbitmq
    newTag: management
  - name: minio
    newName: docker.io/bitnami/minio
    newTag: 2021.6.17
  - name: minio-mc
    newName: docker.io/minio/mc
    newTag: latest
  - name: centos
    newName: docker.io/centos
    newTag: latest
  - name: filebrowser
    newName: docker.io/filebrowser/filebrowser
    newTag: latest
  - name: ftp
    newName: docker.io/delfer/alpine-ftp-server
    newTag: latest
  - name: gridsuite-config-notification-server
    newName: docker.io/gridsuite/config-notification-server
    newTag: latest
  - name: gridsuite-config-server
    newName: docker.io/gridsuite/config-server
    newTag: latest
  - name: gridcapa-app
    newName: docker.io/farao/gridcapa-app
    newTag: latest-auth
  - name: gridcapa-cse-input-data-bridge
    newName: docker.io/farao/gridcapa-data-bridge
    newTag: latest
  - name: gridcapa-cse-adapter
    newName: docker.io/farao/gridcapa-cse-adapter
    newTag: latest
  - name: gridcapa-cse-job-launcher
    newName: docker.io/farao/gridcapa-job-launcher
    newTag: latest
  - name: gridcapa-cse-rao-logs-dispatcher
    newName: docker.io/farao/gridcapa-rao-logs-dispatcher
    newTag: latest
  - name: gridcapa-cse-rao-runner
    newName: p2rte.azurecr.io/farao/gridcapa-rao-runner-with-xpress
    newTag: v1.3.0
  - name: gridcapa-cse-import-runner
    newName: docker.io/farao/gridcapa-cse-cc-import-runner
    newTag: latest
  - name: gridcapa-cse-export-runner
    newName: docker.io/farao/gridcapa-cse-cc-export-runner
    newTag: latest
  - name: gridcapa-cse-task-manager
    newName: docker.io/farao/gridcapa-task-manager
    newTag: latest
  - name: gridcapa-cse-exporter
    newName: docker.io/farao/gridcapa-export
    newTag: latest
  - name: gridcapa-core-valid-input-data-bridge
    newName: docker.io/farao/gridcapa-data-bridge
    newTag: latest
  - name: gridcapa-core-valid-output-data-bridge
    newName: docker.io/farao/gridcapa-output-data-bridge
    newTag: latest
  - name: gridcapa-core-valid-adapter
    newName: docker.io/farao/gridcapa-core-valid-adapter
    newTag: latest
  - name: gridcapa-core-valid-job-launcher
    newName: docker.io/farao/gridcapa-job-launcher
    newTag: latest
  - name: gridcapa-core-valid-rao-logs-dispatcher
    newName: docker.io/farao/gridcapa-rao-logs-dispatcher
    newTag: latest
  - name: gridcapa-core-valid-rao-runner
    newName: docker.io/farao/gridcapa-rao-runner
    newTag: latest
  - name: gridcapa-core-valid-runner
    newName: docker.io/farao/gridcapa-core-valid
    newTag: latest
  - name: gridcapa-core-valid-task-manager
    newName: docker.io/farao/gridcapa-task-manager
    newTag: latest
  - name: gridcapa-cse-valid-input-data-bridge
    newName: docker.io/farao/gridcapa-data-bridge
    newTag: latest
  - name: gridcapa-cse-valid-output-data-bridge
    newName: docker.io/farao/gridcapa-output-data-bridge
    newTag: latest
  - name: gridcapa-cse-valid-adapter
    newName: docker.io/farao/gridcapa-cse-valid-adapter
    newTag: latest
  - name: gridcapa-cse-valid-job-launcher
    newName: docker.io/farao/gridcapa-job-launcher
    newTag: latest
  - name: gridcapa-cse-valid-runner
    newName: docker.io/farao/gridcapa-cse-valid
    newTag: latest
  - name: gridcapa-cse-valid-publication
    newName: docker.io/farao/gridcapa-cse-valid-publication
    newTag: latest
  - name: gridcapa-cse-valid-task-manager
    newName: docker.io/farao/gridcapa-task-manager
    newTag: latest

patchesJson6902:
  - target:
      group: apps
      version: v1
      kind: Deployment
      name: cse-rao-runner
    path: patch.yaml
